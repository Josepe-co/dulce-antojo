================================================================
  LA CASA DE LOS SNACK'S â€” SISTEMA DE MODAL Y CARRITO
================================================================

Fecha de documentaciÃ³n: 21 de febrero de 2026
Archivo: script.js (621 lÃ­neas)


================================================================
  RESUMEN GENERAL
================================================================

El sistema tiene DOS modales principales:

  1. MODAL DE PRODUCTO  â†’ Se abre al hacer clic en "Pedir ahora ğŸ›µ"
                          en cualquier tarjeta de producto.
                          Permite elegir variante, cantidad y
                          agregar el artÃ­culo al carrito.

  2. MODAL DEL CARRITO  â†’ Se abre con el botÃ³n flotante (FAB) que
                          aparece en pantalla cuando hay items en
                          el carrito. Muestra el resumen del pedido,
                          tipo de entrega y envÃ­a todo por WhatsApp.

AdemÃ¡s existe una MASCOTA FLOTANTE llamada KORI que reacciona
con frases y animaciones segÃºn las acciones del usuario.


================================================================
  NÃšMERO DE WHATSAPP CONFIGURADO
================================================================

  NÃºmero:              961 655 6465
  Formato en cÃ³digo:   529616556465
  Variable:            const WA_NUMBER = "529616556465";
  Ubicada en:          script.js

  Para cambiar el nÃºmero: editar la variable WA_NUMBER al inicio
  de la secciÃ³n de modales en script.js.

  Costo de envÃ­o a domicilio: $15
  Variable: const DELIVERY_FEE = 15;


================================================================
  PRODUCTOS Y VARIANTES CONFIGURADOS
================================================================

  1. Banderillas de Salchicha (badge: "Popular")
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ClÃ¡sica          $50
     Papa             $60
     Ramen            $60
     JalapeÃ±o         $60
     Flaminhot        $60
     Cheddar Chetos   $60
     Takis Azules     $60
     Ruffles          $60

  2. Banderillas Mixtas (sin badge)
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ClÃ¡sica          $65
     Papa             $70
     Ramen            $70
     JalapeÃ±o         $70
     Flaminhot        $70
     Cheddar Chetos   $70
     Takis Azules     $70
     Ruffles          $70

  3. Banderillas Base Queso (badge: "Favorita")
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ClÃ¡sica          $70
     Papa             $80
     Ramen            $80
     JalapeÃ±o         $80
     Flaminhot        $80
     Cheddar Chetos   $80
     Takis Azules     $80
     Ruffles          $80

  4. Bolitas de Queso (badge: "6 piezas")
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ClÃ¡sica          $90
     Papa             $100
     Ramen            $100
     JalapeÃ±o         $100
     Flaminhot        $100
     Cheddar Chetos   $100
     Combinadas       $130

  5. Papas a la Francesa (sin badge)
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     PorciÃ³n Chica    $60
     PorciÃ³n Grande   $100

  6. Salchipapas (sin badge)
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     PorciÃ³n Chica    $70
     PorciÃ³n Grande   $120

  Para agregar un producto nuevo: aÃ±adir un objeto al array
  "products" en script.js con los campos: id, name, badge,
  description, image y variants (array de [nombre, "$precio"]).


================================================================
  ESTADO GLOBAL (variables en memoria)
================================================================

  currentProduct        â†’ Objeto del producto actualmente abierto
                          en el modal. Null si no hay ninguno.

  selectedVariantIndex  â†’ Ãndice (nÃºmero) de la variante elegida
                          dentro del array variants del producto.
                          Por defecto 0 (primera variante).

  currentQty            â†’ Cantidad elegida en el modal de producto.
                          MÃ­nimo: 1 Â· MÃ¡ximo: 20

  cart[]                â†’ Array de objetos con los items del pedido.
                          Cada item tiene:
                            key         â†’ "productId__variantIndex"
                            productId   â†’ id del producto
                            productName â†’ nombre del producto
                            variant     â†’ [nombre, "$precio"]
                            qty         â†’ cantidad


================================================================
  MODAL DE PRODUCTO â€” FUNCIONAMIENTO PASO A PASO
================================================================

  1. El usuario hace clic en "Pedir ahora ğŸ›µ" de cualquier tarjeta.

  2. Se llama openOrderModal(productId):
       - Busca el producto en el array products[] por su id.
       - Escribe el nombre del producto en el tÃ­tulo del modal.
       - Resetea la variante seleccionada al Ã­ndice 0.
       - Resetea la cantidad a 1.
       - Renderiza los chips de variantes (renderVariants).
       - Calcula y muestra el subtotal.
       - Pone a Kori en estado "normal".
       - Agrega la clase "open" al overlay y bloquea el scroll.

  3. El usuario selecciona una variante (chip):
       - Se marca el chip como activo (clase "active").
       - Se recalcula el subtotal inmediatamente.

  4. El usuario ajusta la cantidad con â€“ / +:
       - MÃ­nimo 1, mÃ¡ximo 20.
       - El subtotal se actualiza en tiempo real.
       â†’ FÃ³rmula: precio_variante Ã— cantidad

  5. El usuario hace clic en "Agregar al carrito":
       - Se busca si ya existe el mismo producto + variante en cart[].
       - Si existe: suma la cantidad (mÃ¡x. 20).
       - Si no existe: crea un nuevo objeto y lo agrega a cart[].
       - Actualiza el badge del carrito (FAB flotante).
       - Cierra el modal de producto.
       - Kori muestra un mensaje aleatorio de confirmaciÃ³n y
         cambia a estado "feliz" durante ~2.8 segundos.

  Mensajes aleatorios de Kori al agregar:
       "Â¡Listo! Agregado al pedido ğŸ›’"
       "Â¡Va para adentro! ğŸ”¥"
       "Â¡Buena elecciÃ³n! ğŸ˜‹"
       "Â¡Sigue pidiendo! ğŸ‰"

  CÃ“MO CERRAR EL MODAL DE PRODUCTO (3 maneras):
       1. Clic en la X (esquina superior derecha).
       2. Clic fuera del modal (en el fondo oscuro).
       3. Tecla ESC del teclado.


================================================================
  MODAL DEL CARRITO â€” FUNCIONAMIENTO PASO A PASO
================================================================

  1. El botÃ³n flotante FAB (#fabCart) solo es VISIBLE cuando
     hay al menos 1 item en el carrito.
     Muestra un badge con el total de unidades.

  2. Al hacer clic en el FAB se llama openCartModal():
       - Renderiza la lista de items (renderCartItems).
       - Calcula el total actualizado.
       - Actualiza visibilidad de secciÃ³n de entrega.
       - Pone a Kori del carrito en estado "normal".
       - Agrega la clase "open" al overlay y bloquea el scroll.

  3. LISTA DE ITEMS DEL CARRITO:
       - Si cart[] estÃ¡ vacÃ­o: muestra mensaje "carrito vacÃ­o"
         y deshabilita el botÃ³n de enviar.
       - Si hay items: muestra cada uno con:
           Â· Nombre del producto
           Â· Variante elegida
           Â· Precio unitario ($X c/u)
           Â· Controles de cantidad (âˆ’ y +)
           Â· Total del renglÃ³n ($X)
           Â· BotÃ³n âœ• para eliminar

  4. CONTROLES DE CANTIDAD DENTRO DEL CARRITO:
       - BotÃ³n +: incrementa en 1 (mÃ¡x. 20).
       - BotÃ³n âˆ’: decrementa en 1. Si llega a 0, elimina el item.
       - BotÃ³n âœ•: elimina el item directamente.
       - Tras cualquier cambio: actualiza badge, re-renderiza
         la lista y recalcula el total.

  5. TIPO DE ENTREGA (radio buttons):
       - "EnvÃ­o a domicilio" â†’ muestra campo de direcciÃ³n y
         suma $15 al total.
       - "Recoger en local"  â†’ oculta campo de direcciÃ³n y
         no suma costo extra.
       â†’ El total se recalcula automÃ¡ticamente al cambiar.

  6. CAMPO DE DIRECCIÃ“N:
       - Solo visible si se eligiÃ³ "EnvÃ­o a domicilio".
       - Si el usuario intenta enviar sin llenarlo: el campo
         se pone en rojo, aparece un mensaje de error, se hace
         foco en el campo y se anima con vibraciÃ³n (shake).
       - Si el usuario empieza a escribir: el error desaparece.

  7. NOTAS EXTRA (opcional):
       - Campo libre para personalizaciones del pedido.
       - Ej: "sin picante", "extra salsa", etc.

  8. TOTAL MOSTRADO:
       â†’ Suma de (precio_variante Ã— cantidad) de todos los items
         + $15 si se eligiÃ³ envÃ­o a domicilio.

  CÃ“MO CERRAR EL CARRITO (3 maneras):
       1. Clic en la X del modal.
       2. Clic fuera del modal (fondo oscuro).
       3. Tecla ESC del teclado.


================================================================
  BADGE DEL CARRITO (FAB flotante)
================================================================

  - Se muestra/oculta automÃ¡ticamente con updateCartBadge().
  - El nÃºmero refleja el TOTAL DE UNIDADES (suma de qty de todos
    los items, no solo cantidad de productos distintos).
  - El FAB se oculta completamente (display: none) cuando el
    carrito estÃ¡ vacÃ­o.
  - Cada vez que se actualiza, el badge re-anima (efecto bounce).


================================================================
  ENVÃO DEL PEDIDO POR WHATSAPP
================================================================

  Al hacer clic en "Enviar pedido por WhatsApp":

  1. Valida que haya items en el carrito.
  2. Si es domicilio, valida que haya direcciÃ³n.
  3. Construye el mensaje automÃ¡ticamente:

  â”€â”€â”€ FORMATO DEL MENSAJE GENERADO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Â¡Hola La Casa de los Snack's! ğŸŸ Quiero hacer un pedido:

  1. *Banderillas de Salchicha* â€“ ClÃ¡sica Ã— 2 = $100
  2. *Bolitas de Queso* â€“ JalapeÃ±o = $100

  ğŸ›µ *EnvÃ­o a domicilio* (+$15)
  ğŸ“ *DirecciÃ³n:* Calle Benito JuÃ¡rez #12, Col. Centro
  ğŸ’° *Total:* $215
  ğŸ“ *Notas:* Sin chile

  â”€â”€â”€ O SI ES RECOGER EN LOCAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Â¡Hola La Casa de los Snack's! ğŸŸ Quiero hacer un pedido:

  1. *Salchipapas* â€“ PorciÃ³n Grande = $120

  ğŸ  *Recoger en local*
  ğŸ’° *Total:* $120

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  4. Kori (modal y flotante) cambia a estado "feliz".
  5. Tras 900ms abre WhatsApp con el link:
       https://wa.me/529616556465?text=[mensaje codificado]
  6. Limpia el carrito (cart = []).
  7. Actualiza badge (FAB desaparece).
  8. Cierra el modal del carrito.
  9. Limpia campo de direcciÃ³n y notas.
  10. Kori vuelve al estado "normal" tras 3 segundos.


================================================================
  MASCOTA KORI â€” ESTADOS Y COMPORTAMIENTO
================================================================

  Kori aparece en 3 lugares:
    1. Flotante en la pÃ¡gina        â†’ koriImg (#koriImg)
    2. Dentro del modal de producto â†’ koriModalImg (#koriModalImg)
    3. Dentro del modal de carrito  â†’ koriCartImg (#koriCartImg)

  Estados:
    "normal"  â†’ imagen: kori-normal.png
    "feliz"   â†’ imagen: kori-feliz.png + animaciÃ³n bounce

  Frases de Kori flotante (al hacer clic en ella):
    "Â¡Hola! Â¿QuÃ© se te antoja hoy? ğŸ˜‹"
    "Las banderillas estÃ¡n increÃ­bles ğŸŒ¶ï¸"
    "Â¡Pide lo que quieras, todo estÃ¡ rico! ğŸ”¥"
    "Las bolitas de queso HOY estÃ¡n ğŸ§€"
    (cicla en orden al hacer clic)

  CuÃ¡ndo cambia de estado:
    â†’ "feliz" al agregar item al carrito (por ~2.8s)
    â†’ "feliz" al enviar el pedido por WhatsApp (por ~3s)
    â†’ "feliz" mientras el modal del carrito envÃ­a
    â†’ "normal" siempre que se abre un modal de producto

  FunciÃ³n de animaciÃ³n bounce:
    bounceKoriEl(el) â†’ quita y re-agrega la clase "kori-bounce"


================================================================
  OTROS ELEMENTOS INTERACTIVOS DE LA PÃGINA
================================================================

  ACORDEÃ“N DE PRECIOS (en tarjetas de producto):
    - BotÃ³n "Ver precios â–¼" despliega/colapsa la lista de precios.
    - Solo puede haber un acordeÃ³n abierto a la vez.
    - Usa aria-expanded para accesibilidad.

  NAVBAR:
    - Agrega la clase "scrolled" si el scroll supera 30px.
    - MenÃº hamburguesa en mÃ³vil con toggle de clase "open".
    - Los enlaces internos cierran el menÃº al hacer clic.

  SCROLL REVEAL:
    - Usa IntersectionObserver con threshold 0.12.
    - Agrega la clase "visible" a elementos .reveal cuando
      entran al viewport (animaciÃ³n de apariciÃ³n).
    - Se deja de observar el elemento tras la primera apariciÃ³n.

  SMOOTH SCROLL:
    - Todos los enlaces con href="#secciÃ³n" usan
      scrollIntoView({ behavior: "smooth" }).


================================================================
  ARCHIVOS DEL PROYECTO
================================================================

  index.html    â†’ Estructura HTML completa: navbar, hero, menÃº,
                  modal de producto, modal de carrito, Kori,
                  FAB del carrito, secciÃ³n de contacto, footer.

  styles.css    â†’ Todo el diseÃ±o visual: colores, animaciones,
                  layout, responsive, estados de modales.

  script.js     â†’ Toda la lÃ³gica: renderizado de productos,
                  acordeones, modales, carrito, Kori,
                  generaciÃ³n del mensaje y envÃ­o por WhatsApp.

  assets/       â†’ ImÃ¡genes y recursos estÃ¡ticos.

================================================================
